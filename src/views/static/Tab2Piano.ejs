<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Tab2Piano</title><link rel="icon" type="" href="images/icon.png"><link rel="stylesheet" href="/css/variables.css"><link rel="stylesheet" href="/css/style.css"><style>*{box-sizing:border-box}html{height:100%;width:100%}body{user-select:none}.tab2piano-container{max-width:90vw;margin:0 auto;padding:var(--space-8xl)}.arrow-select{position:relative;transform-origin:center center;transition:var(--transition-normal);z-index:2}.black-key{align-items:flex-end;background:var(--color-bg-primary);border:var(--space-xs) solid var(--color-border-light);color:var(--color-text-white);display:flex;height:60%;justify-content:center;margin:0 0 0 -5%;width:9%;z-index:1;font-size:var(--font-size-md);transition:var(--transition-normal)}.explanation{align-items:center;background:var(--color-bg-white);border-radius:var(--radius-md);box-shadow:var(--shadow-sm);display:flex;justify-content:center;margin:var(--space-8xl) 0;padding:var(--space-8xl);text-align:center;user-select:text;width:100%;line-height:var(--line-height-relaxed);font-size:var(--font-size-3xl);color:var(--color-text-secondary);flex-direction: column;}.fret-input{border:none;height:1.15vw;font-family:var(--font-family-primary);color:inherit}.frets{display:flex;flex-direction:column;width:4.9%}.guitar-overlay{height:47.25vw;left:0;position:absolute;top:9.15vw;width:104%}.guitar-wrap{align-items:center;background-image:url("images/overlay.png")!important;background-position:center!important;background-repeat:no-repeat!important;background-size:100%!important;display:flex;flex-direction:column;height:47vw;justify-content:center;background:var(--color-bg-white);margin:var(--space-8xl) 0;width:100%;border-radius:var(--radius-md);box-shadow:var(--shadow-md)}.inputs{align-items:center;display:flex;height:12vw;justify-content:flex-start;margin:0 0 2.18% 0;padding:0 0 0 5.6%;width:100%}.key{cursor:pointer;transition:var(--transition-normal)}.key:hover{background:var(--key-higlight-color0);transform:var(--transform-scale-hover)}.main-wrap{align-items:center;display:flex;flex-direction:column;margin:auto;width:100%}.octave{align-items:flex-start;display:flex;flex-direction:row;height:100%;justify-content:center;width:15%}.piano{align-items:center;display:flex;height:11vw;justify-content:center;width:100%;background:var(--color-bg-white);border-radius:var(--radius-md);box-shadow:var(--shadow-md);padding:var(--space-4xl) 0}.reset{cursor:pointer;font-size:var(--font-size-2xl);position:relative;top:-10.5vw;transition:var(--transition-normal);color:var(--color-primary);font-weight:var(--font-weight-medium)}.reset:hover{color:var(--color-primary-light);transform:var(--transform-hover-up-sm)}.select{align-items:center;display:flex;flex-direction:column;height:6vw;justify-content:center;position:absolute;width:17%}.select-arrow{left:89%;pointer-events:none;position:absolute;top:-153%;width:7%;fill:var(--color-primary)}.select-tuning{appearance:none;border-radius:var(--radius-sm);border:var(--space-xs) solid var(--color-border-light);cursor:pointer;font-size:var(--font-size-4xl);height:3vw;outline:0;position:relative;text-align:center;top:-11vw;width:100%;background:var(--color-bg-white);color:var(--color-text-primary);font-family:var(--font-family-primary);transition:var(--transition-normal);box-shadow:var(--shadow-xs)}.select-tuning:hover{border-color:var(--color-primary);box-shadow:var(--shadow-sm)}.select-tuning:focus{border-color:var(--color-primary);box-shadow:var(--shadow-focus-primary)}.string-index{align-items:center;display:flex;font-size:var(--font-size-2xl);height:1.15vw;justify-content:center;text-align:center;transition:var(--transition-normal);width:100%;font-weight:var(--font-weight-medium)}.string-input{border:none;height:1.15vw;font-family:var(--font-family-primary);color:inherit;font-weight:var(--font-weight-medium)}.strings{display:flex;flex-direction:column;text-align:center;width:4%}.strings-index{align-items:center;display:flex;flex-direction:column;justify-content:center;width:2%}.to-the-left-of-black-key{margin:0 0 0 -5%}.tune-down{left:-41%;rotate:90deg;top:-6%}.tune-up{bottom:-1.5%;left:-40.5%;rotate:270deg}.tune-down,.tune-up{cursor:pointer;position:relative;width:1.25%;fill:var(--color-primary);transition:var(--transition-normal)}.tune-down:hover,.tune-up:hover{fill:var(--color-primary-light);transform:scale(1.1)}.white-key{align-items:flex-end;background:var(--color-bg-white);border:var(--space-xs) solid var(--color-border-light);display:flex;font-size:var(--font-size-md);height:100%;justify-content:center;width:15%;transition:var(--transition-normal)}:root{--error-color:var(--color-error);--hover-color:var(--color-primary);--key-higlight-color0:#ffcc00;--key-higlight-color1:#ff6600;--key-higlight-color2:#66cc66;--key-higlight-color3:#3399ff;--key-higlight-color4:#ff99cc;--key-higlight-color5:#9966cc}input[type=text]{background:transparent;font-size:var(--font-size-2xl);outline:0;padding:var(--space-sm);text-align:center;transition:var(--transition-normal)}input[type=text]:focus{background:var(--color-bg-lighter);border-radius:var(--radius-xs)}</style></head><body><%- include("../partials/nav.ejs") %><div class="tab2piano-container"><div class="main-wrap"><div class="explanation">
            <p><strong>About This Tool:</strong><br>
            This tool allows you to convert guitar tab notes to piano keys and back. You can input the string name and fret number to visualize the corresponding piano key, or click a key on the piano to display the corresponding string and fret numbers.</p>
            
            <p><strong>String Notation:</strong><br>
            String names follow the format of octave + note. Octaves before the middle octave are labeled with a negative number (e.g. -1B for the first key before the middle octave), while octaves after the middle octave have positive numbers (e.g. 1C for the first key after the middle octave). The middle octave does not have a number before it (e.g. C, C#). Black keys are labeled with a # at the end (e.g., 1C# for the first black key after the middle octave).</p>
            
            <p><strong>Keyboard Shortcuts:</strong><br>
            • <strong>Ctrl+R</strong> - Reset all frets<br>
            • <strong>Arrow Keys</strong> - Navigate between inputs (Right/Left to move horizontally, Up/Down to move vertically)<br>
            • <strong>+/- or =</strong> - Increase/decrease the input value by one (includes numpad versions)<br>
            • <strong>Ctrl+U</strong> - Increase tuning by one semitone<br>
            • <strong>Ctrl+J</strong> - Decrease tuning by one semitone<br>
            • You can also use the up/down arrow buttons to adjust tuning.</p>
        </div><div class="guitar-wrap"><div class="select"><div class="select-arrow"><svg class="arrow-select" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 330 330" xml:space="preserve"><path id="XMLID_222_" d="M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606C255,161.018,253.42,157.202,250.606,154.389z"></path></svg></div><select class="select-tuning"></select><div class="reset" onclick="resetFrets()">Reset frets</div></div><div class="tune-up" onclick="adjustTuning(!0)"><svg class="arrow" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 330 330" xml:space="preserve"><path id="XMLID_222_" d="M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606C255,161.018,253.42,157.202,250.606,154.389z"></path></svg></div><div class="inputs"><div class="strings-index"></div><div class="strings"></div><div class="frets"></div></div><div class="tune-down" onclick="adjustTuning(!1)"><svg class="arrow" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 330 330" xml:space="preserve"><path id="XMLID_222_" d="M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606C255,161.018,253.42,157.202,250.606,154.389z"></path></svg></div></div><div class="piano"></div></div><script>const saveToLocalStorage=(e,t)=>localStorage.setItem(e,t),getFromLocalStorage=e=>localStorage.getItem(e);function getRandomNumber(e,t){return Math.floor(Math.random()*(t-e+1))+e}function playAudio(e,t){let n=`audio/${t}/${e.replace("#","Sharp")}.mp3`;new Audio(n).play()}document.addEventListener("pianoRendered",function(){document.querySelectorAll(".key").forEach(function(e){let t=e.id;e.addEventListener("click",function(){playAudio(t,"piano")})});let e=document.querySelectorAll(".fret-input"),t=document.querySelectorAll(".string-input");e.forEach(function(e,n){e.addEventListener("input",function(){let r=t[n].value,u=e.value;if(""!==u.trim()){let e=tab2piano(r,u,n);e&&playAudio(e,"piano")}}),t[n].addEventListener("input",function(){let r=t[n].value,u=e.value;if(""!==u.trim()){let e=tab2piano(r,u,n);e&&playAudio(e,"piano")}})})});let keysSharp=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],keysFLat=["C","DB","D","EB","E","F","GB","G","AB","A","BB","B"],currentKeysS=[],currentKeysFlatS=[],currentKeysB=[],currentKeysFLatB=[],tunings={Custom:"",Standard:["-2E","-2A","-1D","-1G","-1B","E"],"Half step down":["-2D#","-2G#","-1C#","-1F#","-1A#","D#"],"drop D":["-2D","-2A","-1D","-1G","-1B","E"],"Double drop D":["-2D","-2A","-1D","-1G","-1B","D"],"open G":["-2D","-2G","-1D","-1G","-1B","D"],"open D":["-2D","-2A","-1D","-1F#","-1A","D"],"open E":["-2E","-2B","-1E","-1G#","-1B","E"],"open A":["-2E","-2A","-1E","-1A","-1C#","E"],DADGAD:["-2D","-2A","-1D","-1G","-1A","D"]},octaves=6,middleOctaveIndex=3,currentOctave=0;for(;currentOctave<octaves+1;)middleOctaveIndex==currentOctave?(currentKeysS.push(keysSharp),currentKeysB.push(keysFLat)):(currentKeysS.push(keysSharp.map(e=>currentOctave-middleOctaveIndex+e)),currentKeysB.push(keysFLat.map(e=>currentOctave-middleOctaveIndex+e))),currentOctave++;function getKeys(e){return currentKeysS[e+middleOctaveIndex]}function getKey(e,t){return t--,getKeys(e)[t]}function findKeyIndex(e){(e.includes("♭")||e.includes("♯"))&&(e=e.replace("♭","b").replace("♯","#").toUpperCase());let t=currentKeysFlatS.indexOf(e.toUpperCase());return-1===t&&(t=currentKeysFLatB.indexOf(e.toUpperCase()),-1===t)?null:t}function tab2piano(e,t,n=-1){let r=new Date;r=r.toString().slice(0,r.toString().indexOf("GMT")-1).toLowerCase();let u=findKeyIndex(e);if(null==u)return null;let l=u+Number(t);return null==currentKeysFlatS[l]?null:currentKeysFlatS[l]}function piano2tab(e,t,n=-1){let r=new Date;r=r.toString().slice(0,r.toString().indexOf("GMT")-1).toLowerCase();let u=findKeyIndex(e),l=findKeyIndex(t);return null==l?null:l-u}currentKeysFlatS=currentKeysS.flat(),currentKeysFLatB=currentKeysB.flat();let stringIndexes,stringInputs,fretInputs,scrollTimeout,selectTuning=document.querySelector(".select-tuning"),stringsIndex=document.querySelector(".strings-index"),strings=document.querySelector(".strings"),frets=document.querySelector(".frets"),piano=document.querySelector(".piano"),arrowSelect=document.querySelector(".arrow-select"),selectSelected=!1;function saveValuesToLocalStorage(){let e=[],t=[];stringInputs.forEach((n,r)=>{e.push(n.value),t.push(fretInputs[r].value)}),saveToLocalStorage("stringValues",JSON.stringify(e)),saveToLocalStorage("fretValues",JSON.stringify(t)),saveToLocalStorage("tuning",selectTuning.value)}function loadValuesFromLocalStorage(){let e=JSON.parse(getFromLocalStorage("stringValues")),t=JSON.parse(getFromLocalStorage("fretValues"));selectTuning.value=getFromLocalStorage("tuning")||"Standard",e&&t&&(stringInputs.forEach((n,r)=>{n.value=e[r],fretInputs[r].value=t[r]}),visualizePiano())}function generateTuningSelect(){Object.keys(tunings).forEach(e=>{selectTuning.innerHTML+=`<option value="${e}">${e[0].toUpperCase()}${e.slice(1)} tuning</option>`})}function generateInputs(e){stringsIndex.innerHTML="",strings.innerHTML="",frets.innerHTML="";for(let t=0;t<e;t++)stringsIndex.innerHTML+=`<div class="string-index">${t+1}</div>`,strings.innerHTML+='<input type="text" class="string-input" placeholder="C" maxlength="4">',frets.innerHTML+='<input type="text" class="fret-input" placeholder="0" maxlength="3">'}function changeInputs(e){if("string"!=typeof tunings[e]){resetPiano();let t=tunings[e].slice().reverse();document.querySelectorAll(".string-input").forEach((e,n)=>{e.value=t[n]})}}function adjustTuning(e){document.querySelectorAll(".string-input").forEach((t,n)=>{t.value=tab2piano(t.value,e?1:-1,n+1)}),selectTuning.value="Custom",visualizePiano()}function generatePiano(e){piano.innerHTML="";let t="",n=!1;e.forEach((e,r)=>{e.includes("C")&&!e.includes("#")&&(t+='<div class="octave">'),e.includes("#")?(n=!0,t+=`<div class="key black-key" id="${e}"></div>`):n?(n=!1,t+=`<div class="key white-key to-the-left-of-black-key" id="${e}">${e}</div>`):t+=`<div class="key white-key" id="${e}">${e}</div>`,e.includes("B")&&(t+="</div>")}),piano.innerHTML=t;let r=new CustomEvent("pianoRendered",{detail:{keysArray:e}});document.dispatchEvent(r)}function resetPiano(){document.querySelectorAll(".key").forEach(e=>{e.style.backgroundColor=""})}function highlightString(e){stringIndexes[e].style.color="var(--error-color)",stringInputs[e].style.color="var(--error-color)",fretInputs[e].style.color="var(--error-color)"}function unhighlightStrings(){stringInputs.forEach((e,t)=>{e.style.color=`var(--key-higlight-color${t})`,stringIndexes[t].style.color=`var(--key-higlight-color${t})`,fretInputs[t].style.color=`var(--key-higlight-color${t})`})}function visualizePiano(){resetPiano();let e=[],t=[];updateSelectors(),unhighlightStrings(),stringInputs.forEach((n,r)=>{let u=stringInputs[r].value.trim(),l=fretInputs[r].value.trim(),o=tab2piano(u,l,r+1);""==u||""==l&&null!=o||(null!=o?(e.push(r),t.push(o)):highlightString(r))}),t.forEach((t,n)=>{let r=document.querySelector(`#${CSS.escape(t)}`);r&&(r.style.backgroundColor=`var(--key-higlight-color${e[n]})`)})}function updateSelectors(){stringIndexes=document.querySelectorAll(".string-index"),stringInputs=document.querySelectorAll(".string-input"),fretInputs=document.querySelectorAll(".fret-input")}function setColors(){setTimeout(()=>{updateSelectors(),stringIndexes.forEach((e,t)=>{e.style.color=`var(--key-higlight-color${t})`,stringInputs[t].style.color=`var(--key-higlight-color${t})`,fretInputs[t].style.color=`var(--key-higlight-color${t})`})},10)}function setInputListeners(){setTimeout(()=>{updateSelectors(),stringInputs.forEach((e,t)=>{e.addEventListener("input",function(){visualizePiano(),selectTuning.value="Custom"}),fretInputs[t].addEventListener("input",visualizePiano),e.addEventListener("keydown",function(n){let r=e.selectionStart,u=e.value;"ArrowDown"===n.code||"Numpad2"===n.code?(n.preventDefault(),t+1<stringInputs.length&&(stringInputs[t+1].focus(),stringInputs[t+1].setSelectionRange(r,r))):"ArrowUp"===n.code||"Numpad8"===n.code?(n.preventDefault(),t-1>=0&&(stringInputs[t-1].focus(),stringInputs[t-1].setSelectionRange(r,r))):"Minus"===n.code||"NumpadSubtract"===n.code?(n.preventDefault(),null!=tab2piano(e.value,-1,t+1)&&(e.value=tab2piano(e.value,-1,t+1),selectTuning.value="Custom",visualizePiano())):"Equal"===n.code||n.shiftKey&&"Equal"===n.code||"NumpadAdd"===n.code?(n.preventDefault(),""==e.value?(e.value="C",selectTuning.value="Custom"):null!==tab2piano(e.value,1,t+1)&&(e.value=tab2piano(e.value,1,t+1),selectTuning.value="Custom",visualizePiano())):"ArrowRight"!==n.code&&"Numpad6"!==n.code||r!=stringInputs[t].value.length||setTimeout(()=>{fretInputs[t].focus(),fretInputs[t].setSelectionRange(0,0)},10),u!==e.value&&(new InputEvent("input",{data:e.value,inputType:"insertText",isComposing:!1,bubbles:!0,cancelable:!0}),e.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})))}),fretInputs[t].addEventListener("keydown",function(e){let n=fretInputs[t].selectionStart,r=fretInputs[t].value;"ArrowDown"===e.code||"Numpad2"===e.code?(e.preventDefault(),t+1<fretInputs.length&&(fretInputs[t+1].focus(),fretInputs[t+1].setSelectionRange(n,n))):"ArrowUp"===e.code||"Numpad8"===e.code?(e.preventDefault(),t-1>=0&&(fretInputs[t-1].focus(),fretInputs[t-1].setSelectionRange(n,n))):"Minus"===e.code||"NumpadSubtract"===e.code?(e.preventDefault(),fretInputs[t].value=Number(fretInputs[t].value)-1,visualizePiano()):"Equal"===e.code||e.shiftKey&&"Equal"===e.code||"NumpadAdd"===e.code?(e.preventDefault(),""==fretInputs[t].value?fretInputs[t].value="0":fretInputs[t].value=Number(fretInputs[t].value)+1,visualizePiano()):"ArrowLeft"!==e.code&&"Numpad4"!==e.code||0!=n||setTimeout(()=>{stringInputs[t].focus(),stringInputs[t].setSelectionRange(stringInputs[t].value.length,stringInputs[t].value.length)},10),r!==fretInputs[t].value&&(new InputEvent("input",{data:fretInputs[t].value,inputType:"insertText",isComposing:!1,bubbles:!0,cancelable:!0}),fretInputs[t].dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})))})}),document.querySelectorAll(".key").forEach((e,t)=>{e.addEventListener("click",function(){let t=e.id;document.querySelectorAll(".string-input").forEach((e,n)=>{if("var(--error-color)"!==e.style.color){let r=piano2tab(e.value,t,n+1);fretInputs[n].value=null!=r?r:"",visualizePiano()}})})})},10)}function resetFrets(){fretInputs.forEach(e=>{e.value=""}),visualizePiano()}window.addEventListener("beforeunload",saveValuesToLocalStorage),window.addEventListener("load",loadValuesFromLocalStorage),generateTuningSelect(),generateInputs(6),changeInputs("Standard"),selectTuning.addEventListener("click",function(){selectSelected?(selectSelected=!1,arrowSelect.style.rotate=""):(selectSelected=!0,arrowSelect.style.rotate="90deg")}),selectTuning.addEventListener("blur",function(){selectSelected=!1,arrowSelect.style.rotate=""}),selectTuning.addEventListener("change",function(){changeInputs(selectTuning.value),visualizePiano()}),window.addEventListener("scroll",function(){selectSelected&&(clearTimeout(scrollTimeout),selectTuning.blur(),scrollTimeout=setTimeout(()=>{selectTuning.blur()},500))}),generatePiano(currentKeysFlatS),visualizePiano(),setColors(),setInputListeners(),document.addEventListener("keydown",function(e){e.ctrlKey&&"KeyR"===e.code?(e.preventDefault(),resetFrets()):e.ctrlKey&&"KeyU"===e.code?(e.preventDefault(),adjustTuning(!0)):e.ctrlKey&&"KeyJ"===e.code&&(e.preventDefault(),adjustTuning(!1))})</script></div></div></body></html>